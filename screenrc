# options
autodetach on
zombie "q^M"
startup_message off
vbell off
escape ^Ff
defscrollback 10000
altscreen on

# encoding
defutf8 on
defencoding utf-8

# displays
bell_msg "Bell in window %."
activity "Activity in window %."

# caption and hardstatus
caption always "%?%F%{= Bk}%:%{= Kw}%? %-Lw%40L>%?%F%{b db}%:%{b kW}%? %n %t %{-}%+Lw%="
hardstatus alwayslastline "%{= kG} %?%h%:Screen #%n %t in %S%?%=%Y/%m/%d %c:%s  "

# prevent windows size change with iTerm
# (avoid "Aborted because of window size chage")
# But for iTerm, this setting is no longer needed. Instead of this,
# check "Disable session-initiated window resizing" in Terminal Profiles
termcapinfo xterm* 'is=\E[r\E[m\E[2J\E[H\E[?7h\E[?1;4;6l'

# term
defbce on
# term xterm
# term xterm-256color # for xterm and xterm-like terminals
term rxvt-256color # for urxvt

# key bindings
# change encoding
bind U eval "encoding utf-8" "!!!echo 'export LANG=ja_JP.UTF-8'"
bind E eval "encoding euc" "!!!echo 'export LANG=ja_JP.EUC-JP'"
bind S eval "encoding sjis" "!!!echo 'export LANG=ja_JP.Shift_JIS'"

# create and remove window
bind C screen -T xterm
bind K kill
bind x remove

# focus
bind k focus up
bind j focus down
bind h focus left
bind l focus right

# split
bind s eval split focus next next
bind v eval "split -v" focus next next

# resize
bind = resize =
bind - resize -1
bind + resize +1
bind _ resize max
bind ^R eval 'echo -p "\^\^R%080="' 'command -c region'
bind -c region + eval 'resize +1' 'command -c region'
bind -c region - eval 'resize -1' 'command -c region'

# move window
bind N eval "number $WINDOW+1"
bind P eval "number $WINDOW-1"

# layout
bind ^L eval 'echo -p "\^\^L%080="' 'command -c layout'
bind -c layout c eval 'layout new' 'layout show'
bind -c layout ^C eval 'layout new' 'layout show'
bind -c layout n eval 'layout next' 'layout show'
bind -c layout ^N eval 'layout next' 'layout show'
bind -c layout p eval 'layout prev' 'layout show'
bind -c layout ^P eval 'layout prev' 'layout show'
bind -c layout x eval 'layout remove' 'layout show'
bind -c layout ^X eval 'layout remove' 'layout show'
bind -c layout s layout show
bind -c layout ^S layout show

source $HOME/.screenrc.local
